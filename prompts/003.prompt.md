Write a single TypeScript file for our browser-extension project. The file must begin with `// src/lib/extractors ASSISTANT_NAMEExtractor.ts` and then:

1. `import type { AssistantExtractor, LoginWaitOptions, LoginState, ChatSummary, ChatTarget, ChatDetails, PromptSubmission, ChatDelta, ChatResponse } from '../types/assistantBridge';`
2. Export `default class ASSISTANT_NAMEExtractor implements AssistantExtractor` that fully implements every method using the real DOM of ASSISTANT_NAME’s website (no placeholders or TODOs).

Requirements:
- `waitForLoggedIn` must wait until the user is authenticated and core UI is ready (poll DOM as needed), returning a populated `LoginState`.
- `extractChatList` should return recent conversations with ids, titles, urls, updated timestamps, and model ids when available.
- `openChat` must navigate/focus the requested conversation using `ChatTarget` (url or site-specific id); create a fresh chat when neither is provided but `modelId` is present.
- `extractChat` should gather the conversation history (messages with markdown+html content, timestamps, roles, title, model, url).
- `sendPrompt` must locate the site’s input box, focus it, inject the prompt text via real events (`focus`, `input`), submit naturally (e.g., dispatch `keydown Enter`), and respect `timeoutMs`.
- `watchResponse` must attach a `MutationObserver` (or equivalent) to stream assistant output; call `handleDelta` with incremental markdown/html chunks, detect completion, and resolve with the final `ChatResponse` (include usage/token info when exposed).

```typescript
type AssistantId = 'chatgpt' | 'claude' | 'gemini' | 'grok';

export interface LoginWaitOptions {
  readonly timeoutMs?: number;
  readonly pollIntervalMs?: number;
}

export interface LoginState {
  readonly assistantId: AssistantId;
  readonly authenticated: boolean;
  readonly defaultModelId?: string;
  readonly availableModelIds?: readonly string[];
  readonly message?: string;
}

export interface ChatSummary {
  readonly id: string;
  readonly title: string;
  readonly url: string;
  readonly updatedAt: string;
  readonly modelId?: string;
}

export interface ChatMessage {
  readonly id: string;
  readonly role: 'user' | 'assistant' | 'system' | 'tool';
  readonly createdAt: string;
  readonly contentMarkdown: string;
  readonly contentHtml?: string;
}

export interface ChatDetails {
  readonly id: string;
  readonly title: string;
  readonly url: string;
  readonly modelId?: string;
  readonly updatedAt: string;
  readonly messages: readonly ChatMessage[];
}

export interface ChatTarget {
  readonly id?: string;
  readonly url?: string;
  readonly modelId?: string;
}

export interface PromptSubmission {
  readonly promptId: string;
  readonly prompt: string;
  readonly conversation?: ChatTarget;
  readonly modelId?: string;
  readonly timeoutMs?: number;
}

export interface ChatDelta {
  readonly promptId: string;
  readonly html?: string;
  readonly markdown?: string;
  readonly timestamp: string;
}

export interface ChatResponse {
  readonly promptId: string;
  readonly html: string;
  readonly markdown: string;
  readonly finishedAt: string;
  readonly usage?: Record<string, number>;
}

export interface AssistantExtractor {
  waitForLoggedIn(options: LoginWaitOptions): Promise<LoginState>;
  extractChatList(): Promise<readonly ChatSummary[]>;
  openChat(target: ChatTarget): Promise<void>;
  extractChat(target: ChatTarget): Promise<ChatDetails>;
  sendPrompt(request: PromptSubmission): Promise<void>;
  watchResponse(
    request: PromptSubmission,
    handleDelta: (delta: ChatDelta) => void
  ): Promise<ChatResponse>;
}
```

Build the extractor for {ASSISTANT_NAME} (replace with the concrete assistant you’re targeting). Requirements:

- Interact with that site’s DOM directly; no placeholder `throw new Error`.
- Wait for login and core UI before acting.
- Navigate/open chats when `ChatTarget` includes `url` or `id`.
- Gather chat history, including Markdown + HTML (if available) per message.
- Submit prompts using the real textbox/input behavior (simulate focus/input/Enter).
- Stream assistant responses with `watchResponse` using MutationObserver; emit deltas and resolve with the final markdown/html.

Output format: a compilable TypeScript file exporting `class {ASSISTANT_NAME}Extractor implements AssistantExtractor` at top level, plus any helper functions/constants used internally.
